/* --- Variáveis de Cores e Estilos Globais --- */
:root {
    --cor-fundo: #9ea183;
    --cor-texto: #333;
    --cor-primaria: #4a90e2;
    --cor-sucesso: #50e3c2;
    --cor-perigo: #e35050;
    --cor-aviso: #f5a623;
    --cor-secundaria: #5f6469;
    --cor-cartao: #ffffff;
    --cor-borda: #e0e0e0;
    --sombra-cartao: 0 4px 8px rgba(24, 11, 11, 0.05);
    --raio-borda: 8px;
}

[data-theme="dark"] {
    --cor-fundo: #1a1a2e;
    --cor-texto: #e0e0e0;
    --cor-primaria: #5a9ee2;
    --cor-secundaria: #868e96;
    --cor-cartao: #162447;
    --cor-borda: #334;
    --sombra-cartao: 0 4px 12px rgba(0, 0, 0, 0.2);
}

/* --- Reset e Base --- */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
}

body {
    background-color: var(--cor-fundo);
    color: var(--cor-texto);
    transition: background-color 0.3s, color 0.3s;
    line-height: 1.6;
}

/* --- Layout Principal --- */
.container {
    display: flex;
    flex-wrap: wrap;
    max-width: 1400px;
    margin: 20px auto;
    padding: 0 20px;
    gap: 30px;
}

.coluna-principal {
    flex: 3;
    min-width: 300px;
}

.coluna-lateral {
    flex: 1;
    min-width: 300px;
}

h1, h2 {
    color: var(--cor-texto);
    margin-bottom: 1rem;
}

/* --- Abas de Navegação (Tabs) --- */
.tabs-container {
    background-color: var(--cor-cartao);
    padding: 20px;
    border-radius: var(--raio-borda);
    box-shadow: var(--sombra-cartao);
    transition: background-color 0.3s, box-shadow 0.3s;
}

.tabs-nav {
    display: flex;
    border-bottom: 2px solid var(--cor-borda);
    margin-bottom: 20px;
}

.tab-btn {
    padding: 10px 20px;
    cursor: pointer;
    background-color: transparent;
    border: none;
    border-bottom: 3px solid transparent;
    font-size: 1.1rem;
    font-weight: 500;
    color: var(--cor-secundaria);
    transition: all 0.3s ease;
    margin-bottom: -2px; /* Alinha com a borda inferior */
}

.tab-btn:hover {
    color: var(--cor-primaria);
}

.tab-btn.active {
    color: var(--cor-primaria);
    border-bottom-color: var(--cor-primaria);
}

.tab-pane {
    display: none;
}

.tab-pane.active {
    display: block;
}

/* --- Componentes --- */
.balanco-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.card-balanco {
    background-color: var(--cor-cartao);
    padding: 20px;
    border-radius: var(--raio-borda);
    box-shadow: var(--sombra-cartao);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    position: relative;
    overflow: hidden;
}

.card-balanco:hover {
    transform: translateY(-4px);
    box-shadow: 0 10px 20px rgba(0,0,0,0.08);
}

[data-theme="dark"] .card-balanco:hover {
    box-shadow: 0 10px 20px rgba(0,0,0,0.25);
}

.card-balanco h2 {
    font-size: 1rem;
    font-weight: 500;
    color: var(--cor-secundaria);
    display: flex;
    align-items: center;
}

.card-balanco p {
    font-size: 2.2rem;
    font-weight: 600;
    text-align: right;
    margin-top: 10px;
}

.card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.card-header h2 {
    margin-bottom: 0;
}

.card-icon {
    font-size: 1.5rem;
    margin-right: 12px;
    line-height: 1;
}

.btn-pay-bill {
    background-color: var(--cor-aviso);
    color: white;
    padding: 6px 14px;
    font-size: 0.9rem;
    border-radius: 6px;
}

/* Cores dinâmicas para os cards de balanço */
.card-balanco.positivo p {
    color: var(--cor-sucesso);
}

.card-balanco.negativo p {
    color: var(--cor-perigo);
}

.card-balanco.neutro p {
    color: var(--cor-texto);
}

/* --- Análise Gráfica --- */
.graficos-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
}

.grafico-grande {
    grid-column: 1 / -1; /* Ocupa a linha inteira */
}

.analise-resumo {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.analise-resumo-item {
    background-color: var(--cor-fundo);
    padding: 20px;
    border-radius: var(--raio-borda);
    text-align: center;
}

.analise-resumo-item h4 {
    font-size: 0.9rem;
    font-weight: 500;
    color: var(--cor-secundaria);
    margin-bottom: 8px;
    text-transform: uppercase;
}

.analise-resumo-item p {
    font-size: 1.6rem;
    font-weight: bold;
}

.health-status-card p {
    font-size: 1rem;
    font-style: italic;
    font-weight: 500;
}

@media (max-width: 768px) {
    .graficos-grid {
        grid-template-columns: 1fr;
    }
}

.grafico-com-lista {
    display: flex;
    align-items: stretch; /* Garante que a lista e o gráfico tenham a mesma altura */
    gap: 25px;
}

.grafico-container {
    flex: 1.2; /* Dá um pouco mais de espaço para o gráfico */
    min-width: 0; /* Previne que o gráfico encolha demais */
    position: relative; /* Necessário para o Chart.js responsivo */
    height: 280px; /* Altura padrão para os gráficos de rosca */
}

.grafico-grande .grafico-container {
    height: 320px; /* Altura maior para o gráfico de barras */
}

.lista-detalhada {
    flex: 1;
    align-self: stretch; /* Faz a lista esticar na altura do card */
    max-height: 280px; /* Altura máxima para a lista */
    overflow-y: auto; /* Adiciona scroll se a lista for longa */
}

.lista-detalhada-cor {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    flex-shrink: 0;
}

.lista-detalhada-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 5px;
    border-bottom: 1px solid var(--cor-borda);
    font-size: 0.9rem;
}

.lista-detalhada-item:last-child {
    border-bottom: none;
}

.lista-detalhada-valor {
    font-weight: bold;
    color: var(--cor-perigo);
    white-space: nowrap; /* Impede que o valor quebre a linha */
    padding-left: 10px;
}

.lista-detalhada-categoria {
    flex-grow: 1;
    margin-left: 10px;
}

.lista-detalhada-item.receita .lista-detalhada-valor {
    color: var(--cor-sucesso);
}

.grafico-card {
    padding: 20px;
    border-radius: var(--raio-borda);
    background-color: var(--cor-cartao);
}

.grafico-card h3 {
    text-align: center;
    margin-bottom: 15px;
    font-weight: 500;
    font-size: 1.2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
}

.chart-empty-state {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 280px;
    color: var(--cor-secundaria);
    font-style: italic;
}

.grafico-grande .chart-empty-state {
    min-height: 320px; /* Mantém a altura do card consistente */
}

@media (max-width: 1024px) { /* Ajuste para telas menores */
    .grafico-com-lista {
        flex-direction: column;
    }
    .lista-detalhada {
        width: 100%;
        max-height: 200px;
    }
}
/* --- Formulário --- */
.form-group {
    margin-bottom: 15px;
}

.form-group label, .form-group legend {
    display: block;
    margin-bottom: 5px;
    font-weight: 500;
}

input[type="text"], select {
    width: 100%;
    padding: 10px;
    border: 1px solid var(--cor-borda);
    border-radius: 4px;
    background-color: var(--cor-fundo);
    color: var(--cor-texto);
}

fieldset {
    border: none;
    padding: 0;
}

.opcoes-radio {
    display: flex;
    gap: 15px;
}

.opcoes-radio input[type="radio"] {
    margin-right: 5px;
}

/* --- Botões --- */
button {
    padding: 10px 15px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
    transition: opacity 0.2s, box-shadow 0.2s;
    outline: none; /* Remove o outline padrão para usar o box-shadow */
}

/* Estilo de foco acessível para todos os botões */
button:focus-visible {
    box-shadow: 0 0 0 2px var(--cor-fundo), 0 0 0 4px var(--cor-primaria);
}

button:hover {
    opacity: 0.85;
}

#addTransactionBtn {
    width: 100%;
    background-color: var(--cor-primaria);
    color: white;
    padding: 12px;
    font-size: 1rem;
}

.btn-perigo { background-color: var(--cor-perigo); color: white; }
.btn-secondary { background-color: var(--cor-secundaria); color: white; }
.btn-exportar { background-color: var(--cor-sucesso); color: white; }
.btn-toggle-grafico { background-color: var(--cor-primaria); color: white; margin-bottom: 20px; }
.btn-theme { background: none; font-size: 1.5rem; padding: 0 10px; }

/* --- Lista de Transações --- */
.historico-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 10px;
}

.botoes-acao-cabecalho {
    display: flex;
    align-items: center;
    gap: 10px;
}

.filtros-transacoes {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
    padding-bottom: 15px;
    border-bottom: 1px solid var(--cor-borda);
}

.filtro-btn {
    background-color: transparent;
    color: var(--cor-secundaria);
    border: 1px solid var(--cor-borda);
    font-weight: 500;
}

.filtro-btn.active, .filtro-btn:hover {
    background-color: var(--cor-primaria);
    color: white;
    border-color: var(--cor-primaria);
    opacity: 1;
}

.filtro-resumo {
    background-color: var(--cor-fundo);
    padding: 15px;
    border-radius: var(--raio-borda);
    margin-bottom: 20px;
    transition: all 0.3s ease;
    border: 1px solid var(--cor-borda);
}

.resumo-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    justify-content: center;
}

.resumo-item {
    text-align: center;
    padding: 10px 15px;
    border-radius: 4px;
    background-color: var(--cor-cartao);
    flex-grow: 1;
    min-width: 150px; /* Garante que os itens não fiquem muito espremidos */
}

.resumo-item h4 {
    font-size: 0.9rem;
    font-weight: 500;
    color: var(--cor-secundaria);
    margin-bottom: 5px;
}

.resumo-item p {
    font-size: 1.2rem;
    font-weight: bold;
}

.transacoes-header {
    display: grid;
    grid-template-columns: 1.5fr 2fr 1fr 1fr 1fr 1fr;
    font-weight: bold;
    padding: 10px 15px;
    border-bottom: 2px solid var(--cor-borda);
    margin-bottom: 10px;
}

#transacoesLista li {
    display: grid;
    grid-template-columns: 1.5fr 2fr 1fr 1fr 1fr 1fr;
    align-items: center;
    padding: 10px 15px;
    border-bottom: 1px solid var(--cor-borda);
    gap: 10px;
}

#transacoesLista li:last-child {
    border-bottom: none;
}

#transacoesLista li.receita .col-valor { color: var(--cor-sucesso); }
#transacoesLista li.despesa .col-valor { color: var(--cor-perigo); }
.resumo-item .receita { color: var(--cor-sucesso); }
.resumo-item .despesa { color: var(--cor-perigo); }


.col-acoes { text-align: right; }
.col-acoes button { background: none; border: none; cursor: pointer; font-size: 1rem; padding: 5px; }
.delete-btn:hover { color: var(--cor-perigo); }
.edit-btn:hover { color: var(--cor-primaria); }

.empty-state {
    text-align: center;
    padding: 40px;
    color: #888;
}

.historico-footer {
    text-align: center;
    /* Adiciona o espaço abaixo da lista quando o botão aparece */
    padding: 20px 0;
    margin-top: 10px;
}

#btnMostrarMais {
    width: 50%;
    max-width: 250px;
}

/* --- Modal e Notificações --- */
.hidden { display: none !important; }

.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 1000;
    padding: 20px; /* Espaçamento para a "bolha" não colar no topo */
    pointer-events: none; /* Permite clicar "através" do container vazio */
    background-color: transparent;
    display: block; /* Altera de flex para block */
}

.modal-content {
    background-color: var(--cor-cartao);
    border-radius: var(--raio-borda);
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    width: auto; /* Largura automática baseada no conteúdo */
    max-width: 550px;
    margin: 0 auto; /* Centraliza a bolha horizontalmente */
    pointer-events: auto; /* Captura cliques na bolha */
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 20px 25px;
    gap: 20px;
    transform: translateY(-150%);
    transition: transform 0.4s cubic-bezier(0.25, 1, 0.5, 1);
}

.modal-overlay:not(.hidden) .modal-content {
    transform: translateY(0);
}

.modal-header {
    display: none;
}

.modal-icon, .modal-content h3 {
    display: none;
}

#confirmation-message {
    margin: 0;
    font-size: 1.1rem;
    font-weight: 500;
    flex-grow: 1; /* Faz o texto ocupar o espaço disponível */
}

.confirmation-buttons {
    margin-top: 0;
    flex-shrink: 0; /* Impede que os botões encolham */
    display: flex;
    gap: 15px;
}

.notification-container {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 1001;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.toast {
    display: flex;
    align-items: center;
    gap: 15px;
    background-color: var(--cor-cartao);
    color: var(--cor-texto);
    padding: 15px;
    border-radius: var(--raio-borda);
    box-shadow: 0 5px 15px rgba(0,0,0,0.1), 0 2px 5px rgba(0,0,0,0.05);
    min-width: 320px;
    max-width: 400px;
    border-left: 5px solid;
    position: relative;
    overflow: hidden;
    opacity: 0;
    transform: translateX(100%);
    transition: opacity 0.4s ease, transform 0.4s ease;
}

.toast.show {
    opacity: 1;
    transform: translateX(0);
}

.toast.success { border-color: var(--cor-sucesso); }
.toast.error { border-color: var(--cor-perigo); }
.toast.info { border-color: var(--cor-primaria); }

.toast-icon {
    font-size: 1.5rem;
    line-height: 1;
}

.toast.success .toast-icon { color: var(--cor-sucesso); }
.toast.error .toast-icon { color: var(--cor-perigo); }
.toast.info .toast-icon { color: var(--cor-primaria); }

.toast-message {
    flex-grow: 1;
    margin: 0;
    padding-right: 15px;
}

.toast-close {
    position: absolute;
    top: 5px;
    right: 5px;
    background: none;
    border: none;
    color: var(--cor-secundaria);
    font-size: 1.5rem;
    line-height: 1;
    cursor: pointer;
    padding: 5px;
}

.toast-close:hover {
    color: var(--cor-texto);
}

.toast-progress {
    position: absolute;
    bottom: 0;
    left: 0;
    height: 4px;
    background-color: var(--cor-primaria);
    animation: progress-bar linear forwards;
}

@keyframes progress-bar {
    from { width: 100%; }
    to { width: 0%; }
}

.toast.success .toast-progress { background-color: var(--cor-sucesso); }
.toast.error .toast-progress { background-color: var(--cor-perigo); }
.toast.info .toast-progress { background-color: var(--cor-primaria); }

/* --- Responsividade --- */
@media (max-width: 900px) {
    .container {
        flex-direction: column-reverse;
    }
    .transacoes-header, #transacoesLista li {
        grid-template-columns: 2fr 1fr 1fr;
        gap: 15px;
    }
    .col-data, .col-categoria, .col-pagamento {
        display: none;
    }
    #transacoesLista li .col-descricao {
        grid-column: 1 / 2;
    }
    #transacoesLista li .col-valor {
        grid-column: 2 / 3;
        text-align: right;
    }
    #transacoesLista li .col-acoes {
        grid-column: 3 / 4;
    }
}

/* --- Estilos para Telas Maiores (Desktops Largos) --- */
@media (min-width: 1440px) {
    .container {
        max-width: 1600px;
        gap: 40px; /* Aumenta o espaço entre as colunas */
        padding: 0 30px;
    }

    .coluna-principal {
        flex: 2.5; /* Ajusta a proporção para a coluna principal não ficar excessivamente larga */
    }

    .card-balanco p {
        font-size: 1.7rem; /* Leve ajuste no tamanho da fonte do saldo */
    }
}